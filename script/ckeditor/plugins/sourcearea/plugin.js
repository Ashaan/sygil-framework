/*
Copyright (c) 2003-2009, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/

CKEDITOR.plugins.add('sourcearea',{requires:['editingblock'],init:function(a,b){var c=CKEDITOR.plugins.sourcearea;a.on('editingBlockReady',function(){var d;a.addMode('source',{load:function(e,f){d=new CKEDITOR.dom.element('textarea');d.setAttribute('dir','ltr');d.addClass('cke_source');d.setStyles({width:'100%',height:'100%',resize:'none',outline:'none','text-align':'left'});if(CKEDITOR.env.ie)d.setStyles({height:e.$.clientHeight+'px',width:e.$.clientWidth+'px'});if(!CKEDITOR.env.ie)d.on('mousedown',function(g){g=g.data.$;if(g.stopPropagation)g.stopPropagation();});e.setHtml('');e.append(d);a.mayBeDirty=true;this.loadData(f);a.mode='source';a.fire('mode');},loadData:function(e){d.setValue(e);},getData:function(){return d.getValue();},getSnapshotData:function(){return d.getValue();},unload:function(e){d=null;},focus:function(){d.focus();}});});a.addCommand('source',c.commands.source);if(a.ui.addButton)a.ui.addButton('Source',{label:a.lang.source,command:'source'});a.on('mode',function(){var d=a.getCommand('source');d.state=a.mode=='source'?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;d.fire('state');});}});CKEDITOR.plugins.sourcearea={commands:{source:{exec:function(a){a.setMode(a.mode=='source'?'wysiwyg':'source');}}}};
